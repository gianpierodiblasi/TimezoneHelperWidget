TW.Runtime.Widgets.datetimeresource=function(){var c=this;this.runtimeProperties=function(){return{needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-datetimeresource" style="display:none;"></div>'};this.afterRender=function(){var b=c.getProperty("debugMode"),e=(new Date).getTimezoneOffset();b&&console.log("DataTimeResource - browserTimeZoneOffset = "+e);c.setProperty("browserTimeZoneOffset",e)};this.serviceInvoked=function(b){if("Evaluate"===b){b=c.getProperty("debugMode");
var e=c.getProperty("intervalType"),f=c.getProperty("date");b&&console.log("DataTimeResource - intervalType = "+e+", date = "+f);var a=new Date;switch(e){case "yesterday":a=new Date(a.getFullYear(),a.getMonth(),a.getDate()-1);break;case "prev_week":a=new Date(a.getFullYear(),a.getMonth(),a.getDate()-7);break;case "prev_month":a=new Date(a.getFullYear(),a.getMonth()-1,a.getDate());break;case "prev_year":a=new Date(a.getFullYear()-1,a.getMonth(),a.getDate());break;case "tomorrow":a=new Date(a.getFullYear(),
a.getMonth(),a.getDate()+1);break;case "next_week":a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7);break;case "next_month":a=new Date(a.getFullYear(),a.getMonth()+1,a.getDate());break;case "next_year":a=new Date(a.getFullYear()+1,a.getMonth(),a.getDate());break;case "day":case "week":case "month":case "year":a=new Date(f)}a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);switch(e){case "today":case "yesterday":case "tomorrow":case "day":var d=new Date(a.getFullYear(),a.getMonth(),
a.getDate()+1);break;case "this_week":case "prev_week":case "next_week":case "week":switch(a.getDay()){case 0:a.setDate(a.getDate()-6);break;case 1:break;default:a.setDate(a.getDate()-a.getDay()+1)}d=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7);break;case "this_month":case "prev_month":case "next_month":case "month":a=new Date(a.getFullYear(),a.getMonth(),1);d=new Date(a.getFullYear(),a.getMonth()+1,1);break;case "this_year":case "prev_year":case "next_year":case "year":a=new Date(a.getFullYear(),
0,1),d=new Date(a.getFullYear()+1,0,1)}d.setTime(d.getTime()-1);b&&console.log("DataTimeResource - intervalStart = "+a+", intervalEnd = "+d);c.setProperty("intervalStart",a);c.setProperty("intervalEnd",d);c.jqElement.triggerHandler("Evaluated")}};this.updateProperty=function(b){"intervalType"===b.TargetProperty?this.setProperty("intervalType",b.RawSinglePropertyValue):"date"===b.TargetProperty&&this.setProperty("date",b.RawSinglePropertyValue)}};